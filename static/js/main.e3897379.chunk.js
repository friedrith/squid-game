(this["webpackJsonpsquid-game"]=this["webpackJsonpsquid-game"]||[]).push([[0],{11:function(e,t,r){"use strict";r.r(t);var c=r(1),n=r(4),i=r.n(n),s=(r(9),r(2)),o=r(0),a=function(){return Object(o.jsxs)("svg",{className:"h-16 mb-3",viewBox:"0 0 50 15",xmlns:"http://www.w3.org/2000/svg",children:[Object(o.jsx)("circle",{cx:"10",cy:"7",r:"5",className:"stroke-white fill-transparent stroke-1"}),Object(o.jsx)("rect",{x:"20",y:"2",width:"10",height:"10",className:"stroke-white fill-transparent stroke-1"}),Object(o.jsx)("polygon",{points:"35,12 45,12 40,2",className:"stroke-white fill-transparent stroke-1"})]})},l=function(){return Object(o.jsx)("div",{class:"fixed inset-x-0 bottom-0 text-white p-1 text-sm",children:"Made with Love by Interaction Dynamics"})},u=function(){return Object(o.jsx)("a",{href:"https://github.com/interaction-dynamics/squid-game",className:"github-corner","aria-label":"View source on GitHub",children:Object(o.jsxs)("svg",{width:"80",height:"80",viewBox:"0 0 250 250",style:{fill:"#fff",color:"#151513",position:"fixed",top:0,border:0,right:0},"aria-hidden":"true",children:[Object(o.jsx)("path",{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}),Object(o.jsx)("path",{d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor",style:{"ransform-origin":"130px 106px"},class:"octo-arm"}),Object(o.jsx)("path",{d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor",class:"octo-body"})]})})},d=function(e){var t=e.onStart,r=e.permissionAccepted,n=e.isHardByDefault,i=Object(c.useState)(n),d=Object(s.a)(i,2),b=d[0],j=d[1];return Object(o.jsxs)("div",{className:"flex flex-col items-center text-center",children:[Object(o.jsx)(u,{}),Object(o.jsx)(l,{}),Object(o.jsx)(a,{}),Object(o.jsx)("h1",{className:"text-5xl",children:"Squid Game"}),Object(o.jsxs)("div",{className:"text-2xl p-5",children:["Run by pressing [space] or clicking on the page",Object(o.jsx)("br",{})," during the Green light and win."]}),Object(o.jsx)("div",{className:"text-2xl pb-5",children:"Hold still during the Red light or die."}),Object(o.jsx)("div",{className:"block md:hidden my-5 py-5 px-5 bg-white text-blue-500 text-lg font-medium max-w-screen-sm\t rounded",children:"If you are using a smartphone, we suggest you to place your smartphone on a table or use only easy mode. The vibrations while holding the smartphone will be considered as you moving."}),r?Object(o.jsxs)("div",{className:"flex flex-col items-center",children:[Object(o.jsxs)("div",{className:"flex flex-row items-center py-5",children:[Object(o.jsx)("div",{className:"pr-2 cursor-pointer ".concat(b?"text-gray-300":"text-white"),onClick:function(){return j(!1)},children:"Easy"}),Object(o.jsxs)("label",{htmlFor:"toggle",className:"flex items-center cursor-pointer relative ",children:[Object(o.jsx)("input",{className:"sr-only outline-0",type:"checkbox",id:"toggle",checked:b,onChange:function(e){return j(e.target.checked)}}),Object(o.jsx)("div",{className:"bg-gray-200 border-2 border-gray-200 h-6 w-11 rounded-full ".concat(b?"bg-blue-600 border-blue-600":""),children:Object(o.jsx)("div",{className:"absolute top-0.5 left-0.5 bg-white border border-gray-300 rounded-full h-5 w-5 transition shadow-sm ".concat(b?"border-white":""),style:{transform:b?"translateX(100%)":""}})})]}),Object(o.jsx)("div",{className:"pl-2 cursor-pointer ".concat(b?"text-white":"text-gray-300"),onClick:function(){return j(!0)},children:"Hard"})]}),Object(o.jsx)("button",{onClick:function(){return t(b)},className:"h-10 px-6 font-semibold rounded-md bg-white hover:bg-gray-200 text-blue-500",type:"submit",children:"Start"})]}):Object(o.jsxs)("div",{className:"text-lg p-8 text-amber-200",children:["This game requires the access to your webcam.",Object(o.jsx)("br",{}),"Please authorize the webcam."]})]})},b=function(e){var t=e.onStart;return Object(o.jsxs)("div",{className:"text-center",children:[Object(o.jsx)("div",{className:"text-2xl p-5",children:"GAME OVER"}),Object(o.jsx)("div",{className:"text-2xl pb-5",children:"You moved, you lost!"}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{onClick:t,className:"h-10 px-6 font-semibold rounded-md bg-white hover:bg-gray-200 text-black",type:"submit",children:"Back to Start Menu"})})]})},j=function(e){var t=e.onStart;return Object(o.jsxs)("div",{className:"text-center",children:[Object(o.jsx)("div",{className:"text-2xl p-5",children:"VICTORY!"}),Object(o.jsx)("button",{onClick:t,className:"h-10 px-6 font-semibold rounded-md bg-white hover:bg-gray-200 text-sky-900",type:"submit",children:"Back to Start Menu"})]})},h=function(e){var t=e.distance,r=e.walking;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"fixed bottom-0 right-0 z-50",style:{left:"".concat(t,"%"),marginLeft:-40},children:Object(o.jsx)("lord-icon",{src:"https://cdn.lordicon.com/ippkhukl.json",trigger:r?"loop":"morph",colors:"primary:#ffffff,secondary:#ffffff",style:{width:100,height:100}})}),Object(o.jsx)("div",{className:"fixed bottom-0  right-0 h-3 bg-white z-50",style:{width:"".concat(100-t,"%")}})]})},f=function(e){var t=e.motion,r=e.motionMax;return Object(o.jsx)("div",{className:"relative rounded-full border-2 border-white w-16 h-16 opacity-40 flex items-center justify-center overflow-hidden",children:Object(o.jsx)("div",{className:"bg-white absolute rounded-full",style:{width:"".concat(100*t/r,"%"),height:"".concat(100*t/r,"%")}})})},x=function(e){var t=e.motion,r=e.motionMax,c=e.label;return Object(o.jsxs)("div",{className:"flex flex-col items-center",children:[Object(o.jsx)(f,{motion:t,motionMax:r}),Object(o.jsx)("div",{className:"text-2xl p-5",children:c})]})},m=function(e,t){var r=Object(c.useRef)();Object(c.useEffect)((function(){r.current=e}),[e]),Object(c.useEffect)((function(){if(null!==t){var e=setInterval((function(){r.current()}),t);return function(){return clearInterval(e)}}}),[t])},g=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,n=Object(c.useRef)();Object(c.useEffect)((function(){n.current=t}),[t]),Object(c.useEffect)((function(){if(r&&r.addEventListener){var t=function(e){return n.current(e)};return r.addEventListener(e,t),function(){r.removeEventListener(e,t)}}}),[e,r])},O="WAIT_FOR_START",v="GREEN_LIGHT",p="RED_LIGHT",w="VICTORY",y="GAME_OVER",N={WAIT_FOR_START:"bg-blue-500",GREEN_LIGHT:"bg-green-500",RED_LIGHT:"bg-red-500",VICTORY:"bg-sky-900",GAME_OVER:"bg-black"},C=function(){var e=Object(c.useRef)(),t=Object(c.useRef)(),r=Object(c.useState)(O),n=Object(s.a)(r,2),i=n[0],a=n[1],l=Object(c.useState)(0),u=Object(s.a)(l,2),f=u[0],C=u[1],k=Object(c.useState)(""),E=Object(s.a)(k,2),I=E[0],R=E[1],S=Object(c.useState)(!1),T=Object(s.a)(S,2),L=T[0],M=T[1],G=function(e,t){var r=Object(c.useState)((function(){try{var r=window.localStorage.getItem(e);return r?JSON.parse(r):t}catch(F){return console.log(F),t}})),n=Object(s.a)(r,2),i=n[0],o=n[1];return[i,function(t){try{var r=t instanceof Function?t(i):t;o(r),window.localStorage.setItem(e,JSON.stringify(r))}catch(F){console.log(F)}}]}("difficulty",!1),H=Object(s.a)(G,2),_=H[0],A=H[1],D=_?1e3:4e3,B=Object(c.useRef)(),V=function(r){e.current.srcObject=r,B.current=t.current.getContext("2d"),Z(),M(!0)},F=function(e){console.log(e),M(!1)};m((function(){var r;if("function"===typeof(null===B||void 0===B||null===(r=B.current)||void 0===r?void 0:r.drawImage)){B.current.globalCompositeOperation="difference",B.current.drawImage(e.current,0,0,t.current.width,t.current.height);for(var c=0,n=B.current.getImageData(0,0,t.current.width,t.current.height).data,s=0;s<n.length;s+=4){n[s]/3+n[s+1]/3+n[s+2]/3>=32&&c++}R(c),c>=D&&i===p&&a(y),B.current.globalCompositeOperation="source-over",B.current.drawImage(e.current,0,0,t.current.width,t.current.height)}}),100);var q=Object(c.useState)(!1),J=Object(s.a)(q,2),Y=J[0],z=J[1],W=Object(c.useRef)(null),P=function(){if(i===v){var e=f+1;if(C(e),100===e)return a(w),void z(!1);z(!0),clearTimeout(W.current),W.current=setTimeout((function(){console.log("stopWalk"),z(!1)}),100)}};g("keyup",(function(e){32===e.keyCode&&P()})),g("click",(function(e){P()}));var Z=function(){B.current.globalCompositeOperation="source-over",B.current.drawImage(e.current,0,0,t.current.width,t.current.height)};m((function(){i===v?(B.current.globalCompositeOperation="source-over",B.current.drawImage(e.current,0,0,t.current.width,t.current.height),a(p)):i===p&&a(v)}),i===v||i===p?5e3:null);Object(c.useEffect)((function(){var e={audio:!1,video:{width:640,height:480}};navigator.mediaDevices.getUserMedia(e).then(V).catch(F)}),[]);var U=function(){a(O)};return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("video",{className:"hidden",ref:e,autoPlay:!0}),Object(o.jsx)("canvas",{ref:t,width:640,height:480,className:"hidden"}),Object(o.jsxs)("div",{className:"relative h-screen w-screen ".concat(N[i]," p-2 select-none"),children:[Object(o.jsx)("div",{className:"absolute inset-0 flex items-center justify-center"}),Object(o.jsxs)("div",{className:"relative w-full h-full text-white flex items-center justify-center",children:[i===O?Object(o.jsx)(d,{onStart:function(e){C(0),console.log("setHard"),A(e),a(v)},permissionAccepted:L,isHardByDefault:_}):null,i===v?Object(o.jsx)(x,{motion:I,motionMax:D,label:"GREEN LIGHT"}):null,i===p?Object(o.jsx)(x,{motion:I,motionMax:D,label:"RED LIGHT"}):null,i===y?Object(o.jsx)(b,{onStart:U}):null,i===w?Object(o.jsx)(j,{onStart:U}):null]})]}),i!==O?Object(o.jsx)(h,{distance:f,walking:Y}):null]})},k=function(){return Object(o.jsx)(C,{})},E=document.getElementById("root");i.a.render(Object(o.jsx)(c.StrictMode,{children:Object(o.jsx)(k,{})}),E)},9:function(e,t,r){}},[[11,1,2]]]);
//# sourceMappingURL=main.e3897379.chunk.js.map