(this["webpackJsonpsquid-game"]=this["webpackJsonpsquid-game"]||[]).push([[0],{20:function(e,t,c){},22:function(e,t,c){"use strict";c.r(t);var n=c(0),r=c(7),s=c.n(r),i=c(6),a=c(5),o=c(8),l=Object(o.b)({name:"game",initialState:{difficulty:"easy",distance:0,isStarted:!1},reducers:{setDifficulty:function(e,t){var c=t.payload;console.log("setDifficulty",c),e.difficulty=c},setDistance:function(e,t){var c=t.payload;e.distance=c},start:function(e,t){var c=t.payload;e.isStarted=c}}}),u=l.actions,d=u.setDifficulty,j=u.setDistance,b=(u.start,l.reducer),f=function(e){return e.game.difficulty},h=function(e){return e.game.distance},m=function(e){return e.game.isStarted},x=Object(o.a)({reducer:{game:b}}),O=c(2),g=(c(20),c(3)),v=c(1),p=function(e){var t=e.className,c=e.children;return Object(v.jsx)("div",{className:"relative h-screen w-screen p-2 select-none flex justify-center items-center ".concat(t),children:c})};p.defaultProps={className:""};var y=p,N=function(){return Object(v.jsx)("div",{className:"fixed inset-x-0 bottom-0 text-white p-1 text-sm text-center",children:Object(v.jsx)("a",{href:"https://interaction-dynamics.io/",className:"custor-pointer hover:underline",children:"Made with love by Interaction Dynamics"})})},w=function(){return Object(v.jsx)("a",{href:"https://github.com/interaction-dynamics/squid-game",className:"github-corner","aria-label":"View source on GitHub",children:Object(v.jsxs)("svg",{width:"80",height:"80",viewBox:"0 0 250 250",style:{fill:"#fff",color:"#151513",position:"fixed",top:0,border:0,right:0},"aria-hidden":"true",children:[Object(v.jsx)("path",{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}),Object(v.jsx)("path",{d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor",style:{transformOrigin:"130px 106px"},className:"octo-arm"}),Object(v.jsx)("path",{d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor",className:"octo-body"})]})})},C=function(){return Object(v.jsxs)("svg",{className:"h-16 mb-3",viewBox:"0 0 50 15",xmlns:"http://www.w3.org/2000/svg",children:[Object(v.jsx)("circle",{cx:"10",cy:"7",r:"5",className:"stroke-white fill-transparent stroke-1"}),Object(v.jsx)("rect",{x:"20",y:"2",width:"10",height:"10",className:"stroke-white fill-transparent stroke-1"}),Object(v.jsx)("polygon",{points:"35,12 45,12 40,2",className:"stroke-white fill-transparent stroke-1"})]})},k=function(e){var t=e.children,c=e.to,n=e.className;return Object(v.jsx)(i.b,{to:c,className:"h-10 flex items-center justify-center px-6 font-semibold rounded-md bg-white hover:bg-gray-200 ".concat(n),type:"submit",children:t})};k.defaultProps={to:"",className:"",children:[]};var R=k,E=function(e){Object(n.useEffect)((function(){e()}),[])},D={audio:!1,video:{width:640,height:480}},S=function(e){var t=e.onAccepted,c=e.onRefused;E((function(){navigator.mediaDevices.getUserMedia(D).then(t).catch(c)}))},I=function(){return Object(v.jsxs)("div",{className:"text-lg p-8 text-amber-200",children:["This game requires the access to your webcam.",Object(v.jsx)("br",{}),"Please authorize the webcam."]})},L=function(){var e=Object(n.useState)(!1),t=Object(g.a)(e,2),c=t[0],r=t[1];return S({onAccepted:function(){r(!0)},onRefused:function(){r(!1)}}),Object(v.jsxs)(y,{className:"bg-blue-500",children:[Object(v.jsxs)("div",{className:"flex flex-col items-center text-center",children:[Object(v.jsx)(C,{}),Object(v.jsx)("h1",{className:"text-5xl text-white",children:"Squid Game"}),Object(v.jsxs)("div",{className:"text-xl text-gray-300 p-5 py-7",children:[Object(v.jsxs)("p",{className:"p-0 m-0 pb-5",children:["Run by pressing [space] or clicking on the page",Object(v.jsx)("br",{})," during the Green light and win."]}),Object(v.jsx)("p",{className:"p-0 m-0",children:"Hold still during the Red light or die."})]}),Object(v.jsx)("div",{className:"block md:hidden my-5 py-5 px-5 bg-white text-blue-500 text-lg font-medium max-w-screen-sm\t rounded",children:"If you are using a smartphone, we suggest you to place your smartphone on a table or use only easy mode. The vibrations while holding the smartphone will be considered as you moving."}),c?Object(v.jsx)(R,{to:"/difficulty",className:"text-blue-500",children:"Start"}):Object(v.jsx)(I,{})]}),Object(v.jsx)(w,{}),Object(v.jsx)(N,{})]})},M=function(e){var t=e.motionRatio;return Object(v.jsx)("div",{className:"relative rounded-full border-2 border-white w-16 h-16 opacity-40 flex items-center justify-center overflow-hidden",children:Object(v.jsx)("div",{className:"bg-white absolute rounded-full",style:{width:"".concat(100*t,"%"),height:"".concat(100*t,"%")}})})},H=function(e,t){var c=Object(n.useRef)();Object(n.useEffect)((function(){c.current=e}),[e]),Object(n.useEffect)((function(){if(null!==t){var e=setInterval((function(){c.current()}),t);return function(){return clearInterval(e)}}}),[t])},A={EASY:"easy",HARD:"hard"},G=function(e){var t=e.onMove,c=e.onMotionDetected,r=e.pause,s=Object(n.useRef)(),i=Object(n.useRef)(),o=Object(n.useRef)(),l=Object(O.f)(),u=Object(a.c)(f)===A.HARD?1e3:8e3,d=function(){o.current.drawImage(s.current,0,0,i.current.width,i.current.height)},j=function(){o.current.globalCompositeOperation="source-over",d()};S({onAccepted:function(e){b(e)},onRefused:function(){l("/")}});var b=function(e){s.current.srcObject=e,o.current=i.current.getContext("2d"),j()};return Object(n.useEffect)((function(){o.current&&r&&j()}),[r,o.current]),H((function(){var e;if("function"===typeof(null===o||void 0===o||null===(e=o.current)||void 0===e?void 0:e.drawImage)){o.current.globalCompositeOperation="difference",d();for(var n=0,r=o.current.getImageData(0,0,i.current.width,i.current.height).data,s=0;s<r.length;s+=4){r[s]/3+r[s+1]/3+r[s+2]/3>=32&&n++}t(n/u),n>=u&&c(),j()}}),100),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("video",{className:"hidden",ref:s,autoPlay:!0}),Object(v.jsx)("canvas",{ref:i,width:640,height:480,className:"hidden"})]})};G.defaultProps={onMove:function(){},onPermissionChanged:function(){},onMotionDetected:function(){},pause:!1};var P=G,T=function(){var e=Object(a.b)(),t=Object(n.useState)(0),c=Object(g.a)(t,2),r=c[0],s=c[1],i=function(t){return e(d(t))},o=Object(a.c)(f)===A.HARD;return Object(v.jsx)(y,{className:"bg-blue-500",children:Object(v.jsxs)("div",{className:"flex flex-col items-center",children:[Object(v.jsx)(P,{onMove:s}),Object(v.jsx)("div",{className:"text-2xl pb-5 uppercase text-white",children:"Mode of Difficulty"}),Object(v.jsx)(M,{motionRatio:r}),Object(v.jsx)("div",{className:"text-white pt-3",children:"Indicator of movement"}),Object(v.jsxs)("div",{className:"flex flex-row items-center py-7",children:[Object(v.jsx)("div",{className:"pr-2 cursor-pointer ".concat(o?"text-gray-300":"text-white"),onClick:function(){return i(A.EASY)},children:"Easy"}),Object(v.jsxs)("label",{htmlFor:"toggle",className:"flex items-center cursor-pointer relative ",children:[Object(v.jsx)("input",{className:"sr-only outline-0",type:"checkbox",id:"toggle",checked:o,onChange:function(e){return i(e.target.checked?A.HARD:A.EASY)}}),Object(v.jsx)("div",{className:"bg-gray-200 border-2 border-gray-200 h-6 w-11 rounded-full ".concat(o?"bg-blue-600 border-blue-600":""),children:Object(v.jsx)("div",{className:"absolute top-0.5 left-0.5 bg-white border border-gray-300 rounded-full h-5 w-5 transition shadow-sm ".concat(o?"border-white":""),style:{transform:o?"translateX(100%)":""}})})]}),Object(v.jsx)("div",{className:"pl-2 cursor-pointer ".concat(o?"text-white":"text-gray-300"),onClick:function(){return i(A.HARD)},children:"Hard"})]}),Object(v.jsx)(R,{to:"/game",className:"text-blue-500",children:"Confirm"})]})})},q=function(e){var t=e.title,c=e.children;return Object(v.jsxs)("div",{className:"p-5 text-center text-white",children:[Object(v.jsx)("div",{className:"text-2xl pb-5 uppercase",children:t}),Object(v.jsx)("div",{className:"text-lg",children:c})]})};q.defaultProps={title:"",children:[]};var Y=q,B=function(e){var t=e.distance,c=e.walking;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"fixed bottom-0 right-0 z-50",style:{left:"".concat(t,"%"),marginLeft:-40},children:Object(v.jsx)("lord-icon",{src:"https://cdn.lordicon.com/ippkhukl.json",trigger:c?"loop":"morph",colors:"primary:#ffffff,secondary:#ffffff",style:{width:100,height:100}})}),Object(v.jsx)("div",{className:"fixed bottom-0  right-0 h-3 bg-white z-50",style:{width:"".concat(100-t,"%")}})]})},F=function(e,t){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,r=Object(n.useRef)();Object(n.useEffect)((function(){r.current=t}),[t]),Object(n.useEffect)((function(){if(c&&c.addEventListener){var t=function(e){return r.current(e)};return c.addEventListener(e,t),function(){c.removeEventListener(e,t)}}}),[e,c])},z="GREEN_LIGHT",J="RED_LIGHT",V=function(){Object(a.c)(m);var e=Object(O.f)(),t=Object(a.c)(h),c=Object(a.b)(),r=function(e){return c(j(e))};E((function(){0!==t&&r(0)}));var s=Object(n.useState)(0),i=Object(g.a)(s,2),o=i[0],l=i[1],u=Object(n.useState)(z),d=Object(g.a)(u,2),b=d[0],f=d[1],x=Object(n.useState)(!1),p=Object(g.a)(x,2),N=p[0],w=p[1],C=Object(n.useRef)(0),k=function(){e("/game-over")},R=Object(n.useRef)(null),D=function(){if(b===z){var c=t+1;if(r(c),100===c)return w(!1),void e("/victory");w(!0),clearTimeout(R.current),R.current=setTimeout((function(){console.log("stopWalk"),w(!1)}),100)}else b===J&&(C.current+=1,3===C.current&&k())};F("keyup",(function(e){32===e.keyCode&&D()})),F("click",(function(){D()})),H((function(){b===z?(C.current=0,f(J)):b===J&&f(z)}),5e3);var S=b===z?"GREEN LIGHT":"RED LIGHT",I=b===z?"Press [space] or click on the screen":"Hold still or DIE ";return Object(v.jsxs)(y,{className:b===z?"bg-green-500":"bg-red-500",children:[Object(v.jsxs)("div",{className:"flex flex-col items-center",children:[Object(v.jsx)(M,{motionRatio:o}),Object(v.jsx)(Y,{title:S,children:I})]}),Object(v.jsx)(P,{onMove:l,onMotionDetected:function(){b===J&&k()},pause:b===z}),Object(v.jsx)(B,{distance:t,walking:N})]})},Z=function(e){var t=e.className;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(R,{to:"/game",className:"".concat(t," mb-5"),children:"Start Again"}),Object(v.jsx)(R,{to:"/",className:t,children:"Back to Start Menu"})]})};Z.defaultProps={className:""};var _=Z,U=function(){return Object(v.jsx)(y,{className:"bg-black",children:Object(v.jsxs)("div",{className:"text-center",children:[Object(v.jsx)(Y,{title:"Game Over",children:"You moved, you lost!"}),Object(v.jsx)(_,{className:" text-sky-900"})]})})},W=function(){return Object(v.jsx)(y,{className:"bg-green-500",children:Object(v.jsxs)("div",{className:"text-center",children:[Object(v.jsx)(Y,{title:"VICTORY"}),Object(v.jsx)(_,{className:" text-green-500"})]})})},X=function(){return Object(v.jsxs)(O.c,{children:[Object(v.jsx)(O.a,{path:"/",element:Object(v.jsx)(L,{})}),Object(v.jsx)(O.a,{path:"/difficulty",element:Object(v.jsx)(T,{})}),Object(v.jsx)(O.a,{path:"/game-over",element:Object(v.jsx)(U,{})}),Object(v.jsx)(O.a,{path:"/game",element:Object(v.jsx)(V,{})}),Object(v.jsx)(O.a,{path:"/victory",element:Object(v.jsx)(W,{})})]})},K=document.getElementById("root");s.a.render(Object(v.jsx)(n.StrictMode,{children:Object(v.jsx)(a.a,{store:x,children:Object(v.jsx)(i.a,{children:Object(v.jsx)(X,{})})})}),K)}},[[22,1,2]]]);
//# sourceMappingURL=main.3b7e16b5.chunk.js.map